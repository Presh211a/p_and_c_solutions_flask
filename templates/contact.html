{% extends "base.html" %}
{% block title %}Contact{% endblock %}
{% block content %}

<section class="contact-page">
  <!-- Centered Header -->
  <div class="contact-header">
    <h2 class="section-title">Contact Us</h2>
    <p class="section-subtitle">Send us a message â€” weâ€™ll respond as soon as possible.</p>
  </div>

  <!-- Contact Grid -->
  <div class="contact-grid">
    <!-- Contact Information -->
    <div class="contact-info card">
      <h3>Contact Details</h3>
      <p><strong>Email:</strong> <a href="mailto:pcsolutions800@gmail.com">pcsolutions800@gmail.com</a></p>
      <p><strong>WhatsApp/Call:</strong> <a href="https://wa.me/2348133772052" target="_blank">+234 813 377 2052</a></p>
      <p><strong>Location:</strong> Available remotely; walk-ins by appointment.</p>

      <div class="social-links">
        <a href="https://wa.me/2348133772052" target="_blank" class="social-btn whatsapp">ğŸ’¬ WhatsApp</a>
        <a href="mailto:pcsolutions800@gmail.com" class="social-btn email">ğŸ“§ Email</a>
      </div>
    </div>

    <!-- Contact Form -->
    <div class="contact-form card">
      <h3>Request a Quote</h3>
      <!-- Formspree Form -->
      <form id="contact-form" method="POST" action="https://formspree.io/f/xvgdplvg">
        <label for="name">Your Name</label>
        <input id="name" name="name" placeholder="John Doe" required>

        <label for="email">Your Email</label>
        <input id="email" name="email" type="email" placeholder="you@example.com" required>

        <label for="phone">Phone (optional)</label>
        <input id="phone" name="phone" placeholder="+234...">

        <label for="subject">Subject</label>
        <input id="subject" name="subject" value="Service Request">

        <label for="message">Message</label>
        <textarea id="message" name="message" rows="6" placeholder="Tell us about your project..." required></textarea>

        <div class="form-actions">
          <button type="submit" class="btn primary" id="submit-btn">Send Message</button>
          <button type="reset" class="btn outline">Reset</button>
        </div>

        <!-- Success & Error Messages -->
        <div id="form-messages" style="margin-top: 16px; font-weight: 600;"></div>
      </form>
    </div>
  </div>
</section>

<script>
  const form = document.getElementById('contact-form');
  const formMessages = document.getElementById('form-messages');
  const submitBtn = document.getElementById('submit-btn');

  form.addEventListener('submit', async function(event) {
    event.preventDefault();

    // Disable button and show sending text
    submitBtn.disabled = true;
    const originalText = submitBtn.textContent;
    submitBtn.textContent = 'Sending...';

    const data = new FormData(form);
    try {
      const response = await fetch(form.action, {
        method: form.method,
        body: data,
        headers: { 'Accept': 'application/json' }
      });

      if (response.ok) {
        formMessages.style.color = 'green';
        formMessages.textContent = "âœ… Thank you! Your message has been sent.";
        form.reset();
      } else {
        const result = await response.json();
        formMessages.style.color = 'red';
        formMessages.textContent = result.errors ? result.errors.map(e => e.message).join(", ") : "âŒ Oops! Something went wrong.";
      }
    } catch (error) {
      formMessages.style.color = 'red';
      formMessages.textContent = "âŒ Oops! Could not send message. Please try again later.";
    }

    // Re-enable button and restore text
    submitBtn.disabled = false;
    submitBtn.textContent = originalText;
  });
</script>

{% endblock %}
